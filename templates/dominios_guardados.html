<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dominios Guardados | PrestaLabs</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/popups.css">
</head>
<body>
    
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/">PrestaLabs</a>
        <div class="d-flex align-items-center ms-auto" style="color:#fff;font-weight:500;">
            <span id="fecha-hora-caba" class="me-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                <path d="M8 3.5a.5.5 0 0 1 .5.5v4h3a.5.5 0 0 1 0 1h-3.5A.5.5 0 0 1 7 8.5v-4A.5.5 0 0 1 8 3.5z"></path>
                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm0-1A7 7 0 1 1 8 1a7 7 0 0 1 0 14z"></path>
              </svg>
              <!-- Fecha y hora Argentina/CABA -->
              <span id="fecha-hora-texto"></span>
            </span>
        </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown d-flex align-items-center">
                  <span class="me-2" style="color: #fff; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
                    <i class="fas fa-user-circle"></i>
                    {% if user.is_authenticated %}
                      {{ user.username }}
                    {% endif %}
                  </span>
                  <a class="nav-link dropdown-toggle" href="#" id="accionesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                      <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path>
                    </svg>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="accionesDropdown">
                    <li>
                      <a class="dropdown-item text-danger d-flex align-items-center" href="/logout/">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-box-arrow-right me-2" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M6 3a.5.5 0 0 1 .5.5v1A.5.5 0 0 1 6 5H2.5A1.5 1.5 0 0 0 1 6.5v3A1.5 1.5 0 0 0 2.5 11H6a.5.5 0 0 1 0 1H2.5A2.5 2.5 0 0 1 0 8.5v-3A2.5 2.5 0 0 1 2.5 3H6zm3.146 3.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1h5.793l-1.147-1.146a.5.5 0 0 1 0-.708z"/>
                        </svg>
                        Cerrar sesión
                      </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                      <a class="dropdown-item d-flex justify-content-between align-items-center" href="/usuarios/editar/">
                        Gestión de Usuarios
                        <span class="badge bg-admin ms-2">Admin</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item d-flex justify-content-between align-items-center" href="/analisis/dominio/">
                        Análisis de Dominio Completo
                        <span class="badge bg-pro ms-2">Pro</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/">
                        <i class="bi bi-bookmark-star me-2"></i>
                        Dominios Guardados
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item d-flex align-items-center" href="/urls/guardadas/">
                        <i class="bi bi-bookmark-heart me-2"></i>
                        URLs Guardadas
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item d-flex justify-content-between align-items-center" href="/analisis/url/">
                        Análisis de URL Específica
                        <span class="badge bg-seo ms-2">SEO</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item d-flex justify-content-between align-items-center" href="/reportes/nuevo/">
                        Reportes y Estadísticas
                        <span class="badge bg-data ms-2">Data</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="/configuracion/">Configuración del Sistema</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="/documentacion/">Documentación y Ayuda</a>
                    </li>
                  </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
// Actualizar fecha y hora de Argentina/CABA
function actualizarFechaHoraCABA() {
    const now = new Date();
    const opciones = { timeZone: 'America/Argentina/Buenos_Aires', year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', hour12: true };
    const fechaHora = now.toLocaleString('es-AR', opciones);
    document.getElementById('fecha-hora-texto').textContent = fechaHora;
}
setInterval(actualizarFechaHoraCABA, 1000);
actualizarFechaHoraCABA();
</script>

<style>
  .badge {
    font-size: 0.6em;
    padding: 0.25em 0.5em;
    margin-left: 0.5em;
    vertical-align: middle;
  }
  .bg-admin {
    background-color: #dc3545 !important;
  }
  .bg-pro {
    background-color: #007bff !important;
  }
  .bg-seo {
    background-color: #28a745 !important;
  }
  .bg-data {
    background-color: #6f42c1 !important;
  }
  .navbar-nav .nav-link {
    display: flex;
    align-items: center;
  }
  .navbar-nav .nav-link i {
    margin-right: 0.5em;
    min-width: 1.5em;
  }
</style>


    <main class="container mt-4">
        
        
<div class="container-xl py-3">
	<div class="row mb-4">
		<div class="col-12">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h2 class="fw-bold text-dark">
					<i class="bi bi-bookmark-star me-2"></i>Dominios Guardados
				</h2>
				<div class="d-flex align-items-center">
					<span class="badge bg-primary">{{ total_guardados }} dominio{{ total_guardados|pluralize }}</span>
					<a href="/analisis/dominio/" class="btn btn-outline-primary btn-sm ms-2">
						<i class="bi bi-arrow-left me-1"></i>Volver al análisis
					</a>
				</div>
			</div>

			{% if mensaje %}
				<div class="alert alert-success alert-dismissible fade show" role="alert">
					{{ mensaje }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endif %}

			{% if total_guardados > 0 %}
				<div class="card shadow-sm">
					<div class="card-body p-0">
						<div class="table-responsive">
							<table class="table table-hover mb-0" style="font-size:0.9em;">
								<thead class="table-light">
									<tr>
										<th class="fw-bold">Dominio</th>
										<th class="fw-bold text-center">URLs</th>
										<th class="fw-bold text-center">Fecha inicio</th>
										<th class="fw-bold text-center">Fecha fin</th>
										<th class="fw-bold text-center">Estado</th>
										<th class="fw-bold text-center">Usuario</th>
										<th class="text-center">Acciones</th>
									</tr>
								</thead>
								<tbody>
									{% for d in dominios %}
										<tr>
											<td class="align-middle">
												<div class="d-flex align-items-center">
													<i class="bi bi-bookmark-fill text-warning me-2"></i>
													<div>
														<div class="fw-semibold text-primary">{{ d.dominio }}</div>
														<small class="text-muted">{{ d.dominio_normalizado }}</small>
													</div>
												</div>
											</td>
											<td class="text-center align-middle">
												<span class="badge bg-info">{{ d.urls_count }}</span>
											</td>
											<td class="text-center align-middle">
												<small class="text-muted">
													{{ d.fecha|date:"d/m/Y H:i" }}
												</small>
											</td>
											<td class="text-center align-middle">
												{% if d.fecha_fin %}
													<small class="text-success">
														{{ d.fecha_fin|date:"d/m/Y H:i" }}
													</small>
												{% else %}
													<small class="text-muted">En progreso</small>
												{% endif %}
											</td>
											<td class="text-center align-middle">
												{% if d.puede_detener %}
													<span class="badge bg-warning">
														<i class="bi bi-clock-history me-1"></i>Activo
													</span>
												{% elif d.fecha_fin %}
													<span class="badge bg-success">
														<i class="bi bi-check-circle me-1"></i>Completado
													</span>
												{% else %}
													<span class="badge bg-secondary">
														<i class="bi bi-pause-circle me-1"></i>Detenido
													</span>
												{% endif %}
											</td>
											<td class="text-center align-middle">
												{% if d.usuario %}
													<small class="text-muted">{{ d.usuario.username }}</small>
												{% else %}
													<small class="text-muted">Anónimo</small>
												{% endif %}
											</td>
											<td class="text-center align-middle">
												<div class="dropdown">
													<button class="btn btn-light btn-sm dropdown-toggle px-2 py-1" type="button" id="accionesDropdown{{ d.id }}" data-bs-toggle="dropdown" aria-expanded="false">
														<i class="bi bi-three-dots-vertical" style="font-size:1.3em;"></i>
													</button>
													<ul class="dropdown-menu" aria-labelledby="accionesDropdown{{ d.id }}">
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/analisis/detalle/?id={{ d.id }}">
																<i class="bi bi-eye me-2 text-primary"></i> Ver URLs
															</a>
														</li>
														<li><hr class="dropdown-divider"></li>
														<li class="dropdown-header"><small>Exportar</small></li>
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/{{ d.id }}/exportar/csv/">
																<i class="bi bi-file-earmark-spreadsheet me-2 text-success"></i> CSV
															</a>
														</li>
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/{{ d.id }}/exportar/excel/">
																<i class="bi bi-file-earmark-excel me-2 text-success"></i> Excel
															</a>
														</li>
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/{{ d.id }}/exportar/json/">
																<i class="bi bi-file-earmark-code me-2 text-success"></i> JSON
															</a>
														</li>
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/{{ d.id }}/exportar/pdf/">
																<i class="bi bi-file-earmark-pdf me-2 text-success"></i> PDF
															</a>
														</li>
														<li>
															<a class="dropdown-item d-flex align-items-center" href="/dominios/guardados/{{ d.id }}/exportar/txt/">
																<i class="bi bi-file-earmark-text me-2 text-success"></i> TXT
															</a>
														</li>
														<li><hr class="dropdown-divider"></li>
														<li>
															<form method="post" action="/dominios/guardados/" style="display:inline;">
																{% csrf_token %}
																<button type="submit" name="eliminar_individual" value="{{ d.id }}" class="dropdown-item d-flex align-items-center">
																	<i class="bi bi-trash me-2 text-danger"></i> Eliminar
																</button>
															</form>
														</li>
													</ul>
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<!-- Paginación -->
				{% if page_obj.has_other_pages %}
					<nav aria-label="Navegación de dominios guardados" class="mt-4">
						<ul class="pagination justify-content-center">
							{% if page_obj.has_previous %}
								<li class="page-item">
									<a class="page-link" href="?page=1">Primera</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="?page={{ page_obj.previous_page_number }}">Anterior</a>
								</li>
							{% endif %}

							<li class="page-item active">
								<span class="page-link">
									Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
								</span>
							</li>

							{% if page_obj.has_next %}
								<li class="page-item">
									<a class="page-link" href="?page={{ page_obj.next_page_number }}">Siguiente</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Última</a>
								</li>
							{% endif %}
						</ul>
					</nav>
				{% endif %}
			{% else %}
				<!-- Estado vacío -->
				<div class="card border-0 bg-light">
					<div class="card-body text-center py-5">
						<div class="mb-4">
							<i class="bi bi-bookmark text-muted" style="font-size: 4rem;"></i>
						</div>
						<h4 class="text-muted mb-3">No hay dominios guardados</h4>
						<p class="text-muted mb-4">
							Aún no has marcado ningún dominio como guardado.<br>
							Ve al análisis de dominios y marca los que te interesen.
						</p>
						<a href="/analisis/dominio/" class="btn btn-primary">
							<i class="bi bi-search me-2"></i>Ir al análisis de dominios
						</a>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
</div>

<script>
// Función para detener crawling desde la tabla
function detenerCrawlingTabla(busquedaId, dominio, form) {
    if (confirm(`¿Estás seguro de que quieres detener el crawling de "${dominio}"?`)) {
        // Crear input hidden para el ID del progreso
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'detener_progreso';
        input.value = busquedaId;
        form.appendChild(input);
        
        // Enviar formulario
        form.submit();
    }
}
</script>

    </main>
    <!-- Sistema Centralizado de Modales -->
    <!-- Modal Universal para Confirmación -->
    <div class="modal fade" id="modalConfirmacion" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalConfirmacionTitulo">
                        <i class="bi bi-question-circle me-2"></i>
                        Confirmación
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="modalConfirmacionMensaje">¿Está seguro de realizar esta acción?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnCancelar">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnConfirmar">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Universal para Alertas/Información -->
    <div class="modal fade" id="modalAlerta" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalAlertaTitulo">
                        <i class="bi bi-info-circle me-2"></i>
                        Información
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="modalAlertaMensaje">Mensaje de información</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="btnAlertaOK">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Universal para Éxito -->
    <div class="modal fade" id="modalExito" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalExitoTitulo">
                        <i class="bi bi-check-circle me-2"></i>
                        Éxito
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="modalExitoMensaje">Operación completada exitosamente</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="btnExitoOK">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Universal para Errores -->
    <div class="modal fade" id="modalError" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalErrorTitulo">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        Error
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="modalErrorMensaje">Ha ocurrido un error</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="btnErrorOK">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sistema de Gestión de Popups Universal -->
    <script>
    /**
     * Sistema Centralizado de Popups - PrestaLabs
     * Autor: Sistema robusto y escalable
     * Reemplaza alert(), confirm() y maneja todos los modales
     */
    
    // Namespace global para PrestaLabs
    window.PrestaLabs = window.PrestaLabs || {};
    
    // Sistema de Popups
    PrestaLabs.Popup = {
        
        // Instancias de modales (cache)
        _modals: {},
        
        // Inicializar modales (lazy loading)
        _getModal: function(tipo) {
            if (!this._modals[tipo]) {
                const element = document.getElementById('modal' + tipo.charAt(0).toUpperCase() + tipo.slice(1));
                if (element) {
                    this._modals[tipo] = new bootstrap.Modal(element, {
                        backdrop: 'static',
                        keyboard: false
                    });
                }
            }
            return this._modals[tipo];
        },
        
        // Confirmar acción (reemplaza confirm())
        confirmar: function(mensaje, onConfirm, onCancel, opciones = {}) {
            const titulo = opciones.titulo || 'Confirmación';
            const textoConfirmar = opciones.textoConfirmar || 'Confirmar';
            const textoCancelar = opciones.textoCancelar || 'Cancelar';
            const tipoBoton = opciones.tipoBoton || 'primary';
            
            // Configurar contenido
            document.getElementById('modalConfirmacionTitulo').innerHTML = `
                <i class="bi bi-question-circle me-2"></i>${titulo}
            `;
            document.getElementById('modalConfirmacionMensaje').textContent = mensaje;
            document.getElementById('btnConfirmar').textContent = textoConfirmar;
            document.getElementById('btnConfirmar').className = `btn btn-${tipoBoton}`;
            document.getElementById('btnCancelar').textContent = textoCancelar;
            
            // Limpiar eventos previos
            const btnConfirmar = document.getElementById('btnConfirmar');
            const btnCancelar = document.getElementById('btnCancelar');
            const newBtnConfirmar = btnConfirmar.cloneNode(true);
            const newBtnCancelar = btnCancelar.cloneNode(true);
            btnConfirmar.parentNode.replaceChild(newBtnConfirmar, btnConfirmar);
            btnCancelar.parentNode.replaceChild(newBtnCancelar, btnCancelar);
            
            // Configurar eventos
            newBtnConfirmar.addEventListener('click', function() {
                PrestaLabs.Popup._getModal('confirmacion').hide();
                if (onConfirm && typeof onConfirm === 'function') {
                    onConfirm();
                }
            });
            
            newBtnCancelar.addEventListener('click', function() {
                PrestaLabs.Popup._getModal('confirmacion').hide();
                if (onCancel && typeof onCancel === 'function') {
                    onCancel();
                }
            });
            
            // Mostrar modal
            this._getModal('confirmacion').show();
        },
        
        // Mostrar alerta informativa (reemplaza alert())
        alerta: function(mensaje, onClose, opciones = {}) {
            const titulo = opciones.titulo || 'Información';
            const textoBoton = opciones.textoBoton || 'OK';
            
            // Configurar contenido
            document.getElementById('modalAlertaTitulo').innerHTML = `
                <i class="bi bi-info-circle me-2"></i>${titulo}
            `;
            document.getElementById('modalAlertaMensaje').textContent = mensaje;
            document.getElementById('btnAlertaOK').textContent = textoBoton;
            
            // Limpiar eventos previos
            const btnOK = document.getElementById('btnAlertaOK');
            const newBtnOK = btnOK.cloneNode(true);
            btnOK.parentNode.replaceChild(newBtnOK, btnOK);
            
            // Configurar evento
            newBtnOK.addEventListener('click', function() {
                PrestaLabs.Popup._getModal('alerta').hide();
                if (onClose && typeof onClose === 'function') {
                    onClose();
                }
            });
            
            // Mostrar modal
            this._getModal('alerta').show();
        },
        
        // Mostrar mensaje de éxito
        exito: function(mensaje, onClose, opciones = {}) {
            const titulo = opciones.titulo || 'Éxito';
            const textoBoton = opciones.textoBoton || 'OK';
            
            // Configurar contenido
            document.getElementById('modalExitoTitulo').innerHTML = `
                <i class="bi bi-check-circle me-2"></i>${titulo}
            `;
            document.getElementById('modalExitoMensaje').textContent = mensaje;
            document.getElementById('btnExitoOK').textContent = textoBoton;
            
            // Limpiar eventos previos
            const btnOK = document.getElementById('btnExitoOK');
            const newBtnOK = btnOK.cloneNode(true);
            btnOK.parentNode.replaceChild(newBtnOK, btnOK);
            
            // Configurar evento
            newBtnOK.addEventListener('click', function() {
                PrestaLabs.Popup._getModal('exito').hide();
                if (onClose && typeof onClose === 'function') {
                    onClose();
                }
            });
            
            
            // Mostrar modal
            this._getModal('exito').show();
        },
        
        // Mostrar mensaje de error
        error: function(mensaje, onClose, opciones = {}) {
            const titulo = opciones.titulo || 'Error';
            const textoBoton = opciones.textoBoton || 'OK';
            
            // Configurar contenido
            document.getElementById('modalErrorTitulo').innerHTML = `
                <i class="bi bi-exclamation-triangle me-2"></i>${titulo}
            `;
            document.getElementById('modalErrorMensaje').textContent = mensaje;
            document.getElementById('btnErrorOK').textContent = textoBoton;
            
            // Limpiar eventos previos
            const btnOK = document.getElementById('btnErrorOK');
            const newBtnOK = btnOK.cloneNode(true);
            btnOK.parentNode.replaceChild(newBtnOK, btnOK);
            
            // Configurar evento
            newBtnOK.addEventListener('click', function() {
                PrestaLabs.Popup._getModal('error').hide();
                if (onClose && typeof onClose === 'function') {
                    onClose();
                }
            });
            
            // Mostrar modal
            this._getModal('error').show();
        },
        
        // Cerrar todos los modales
        cerrarTodos: function() {
            Object.keys(this._modals).forEach(tipo => {
                if (this._modals[tipo]) {
                    this._modals[tipo].hide();
                }
            });
        },
        
        // Verificar si hay modales abiertos
        hayModalAbierto: function() {
            return document.querySelectorAll('.modal.show').length > 0;
        }
    };
    
    // Aliases para retrocompatibilidad gradual
    PrestaLabs.confirm = PrestaLabs.Popup.confirmar;
    PrestaLabs.alert = PrestaLabs.Popup.alerta;
    PrestaLabs.success = PrestaLabs.Popup.exito;
    PrestaLabs.error = PrestaLabs.Popup.error;
    
    // Sistema de interceptación opcional para migración gradual
    PrestaLabs.Popup.interceptar = {
        alert: function(activar = true) {
            if (activar && !window._alertOriginal) {
                window._alertOriginal = window.alert;
                window.alert = function(mensaje) {
                    PrestaLabs.Popup.alerta(mensaje);
                };
            } else if (!activar && window._alertOriginal) {
                window.alert = window._alertOriginal;
                delete window._alertOriginal;
            }
        },
        
        confirm: function(activar = true) {
            if (activar && !window._confirmOriginal) {
                window._confirmOriginal = window.confirm;
                window.confirm = function(mensaje, onConfirm) {
                    PrestaLabs.Popup.confirmar(mensaje, 
                        () => onConfirm && onConfirm(true),
                        () => onConfirm && onConfirm(false)
                    );
                    return false; // Para evitar ejecución inmediata
                };
            } else if (!activar && window._confirmOriginal) {
                window.confirm = window._confirmOriginal;
                delete window._confirmOriginal;
            }
        }
    };
    
    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
        // Opcional: Activar interceptación automática
        // PrestaLabs.Popup.interceptar.alert(true);
        // PrestaLabs.Popup.interceptar.confirm(true);
        
        console.log('✅ Sistema de Popups PrestaLabs inicializado');
    });
    
    </script>

    <footer class="footer mt-auto">
        <div class="container py-2">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 mx-auto text-center">
                    <div class="footer-minimal animate-footer">
                        <span class="footer-mail-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 32 20" style="vertical-align:middle; margin-right:6px; border-radius:2px; box-shadow:0 1px 4px rgba(36,44,79,0.10);">
                                <rect width="32" height="20" rx="2" fill="#74ACDF"/>
                                <rect y="6" width="32" height="8" fill="#fff"/>
                                <circle cx="16" cy="10" r="3.2" fill="#FFD600" stroke="#74ACDF" stroke-width="1.2"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="var(--color-amarillo)" class="bi bi-envelope-fill mb-1" viewBox="0 0 16 16" style="vertical-align:middle; margin-right:6px;">
                                <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.651L0 4.697ZM6.761 8.83l-6.57 4.134A2 2 0 0 0 2 14h12a2 2 0 0 0 1.809-1.036l-6.57-4.134L8 9.586l-1.239-.757ZM16 4.697l-5.803 3.456L16 11.801V4.697Z"/>
                            </svg>
                            apresta@sicyt.gob.ar
                        </span>
                        <span class="footer-info-title">Subsecretaría de Tecnología de la información y las comunicaciones</span>
                        <span class="footer-info-title">Secretaría de Innovación, ciencia y tecnología</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>