<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PrestaLabs{% endblock %}</title>
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{% url 'core:index' %}">PrestaLabs</a>
            <div class="d-none d-md-flex align-items-center ms-auto me-4" id="header-time">
                <span style="font-weight:600; color:var(--color-amarillo); font-size:1.05em;">
                    Argentina (CABA): <span id="hora-caba"></span>
                </span>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="accionesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                                                                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                                                </svg>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="accionesDropdown">
                                <li><a class="dropdown-item" href="/usuarios/">Gestión de Usuarios</a></li>
                                <li><a class="dropdown-item" href="/analisis/dominio/">Análisis de Dominio Completo</a></li>
                                <li><a class="dropdown-item" href="/analisis/url/">Análisis de URL Específica</a></li>
                                <li><a class="dropdown-item" href="/logout/">Cerrar sesión</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="/login/">Iniciar sesión</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    

    <main class="container mt-4">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
        {% block content %}
        {% endblock %}
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    function actualizarHoraCABA() {
        const ahora = new Date();
        // UTC-3 para Argentina/CABA
        const offset = -3;
        const utc = ahora.getTime() + (ahora.getTimezoneOffset() * 60000);
        const caba = new Date(utc + (3600000 * offset));
        const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const fecha = caba.toLocaleDateString('es-AR', opciones);
        const hora = caba.toLocaleTimeString('es-AR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        document.getElementById('hora-caba').textContent = fecha + ' ' + hora;
    }
    setInterval(actualizarHoraCABA, 1000);
    actualizarHoraCABA();
    </script>
    </main>

    <footer class="footer mt-auto">
        <div class="container py-2">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 mx-auto text-center">
                    <div class="footer-minimal animate-footer">
                        <span class="footer-mail-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 32 20" style="vertical-align:middle; margin-right:6px; border-radius:2px; box-shadow:0 1px 4px rgba(36,44,79,0.10);">
                                <rect width="32" height="20" rx="2" fill="#74ACDF"/>
                                <rect y="6" width="32" height="8" fill="#fff"/>
                                <circle cx="16" cy="10" r="3.2" fill="#FFD600" stroke="#74ACDF" stroke-width="1.2"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="var(--color-amarillo)" class="bi bi-envelope-fill mb-1" viewBox="0 0 16 16" style="vertical-align:middle; margin-right:6px;">
                                <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.651L0 4.697ZM6.761 8.83l-6.57 4.134A2 2 0 0 0 2 14h12a2 2 0 0 0 1.809-1.036l-6.57-4.134L8 9.586l-1.239-.757ZM16 4.697l-5.803 3.456L16 11.801V4.697Z"/>
                            </svg>
                            apresta@sicyt.gob.ar
                        </span>
                        <span class="footer-info-title">Subsecretaría de Tecnología de la información y las comunicaciones</span>
                        <span class="footer-info-title">Secretaría de Innovación, ciencia y tecnología</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>